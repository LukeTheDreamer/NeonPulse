<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEON STORM | Protocol: Tezcatlipoca</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        body { background-color: #050505; margin: 0; overflow: hidden; }
        
        /* Cyber-clip shapes for buttons/modals as seen in your React logic */
        .clip-cyber {
            clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0% 30%);
        }
        .clip-cyber-btn {
            clip-path: polygon(5% 0, 100% 0, 100% 100%, 0 100%, 0 25%);
        }

        /* Custom Scrollbar for Leaderboard */
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #00f3ff; }
    </style>
</head>
<body>

    <div id="neon-storm-root"></div>

    <script type="text/babel" src="js/games/neonstorm.js"></script>

    <script type="text/babel">
        const { useEffect, useState } = React;

        function App() {
            const [user, setUser] = useState(null);

            useEffect(() => {
                // Initial fetch for user data to pass to the game
                fetch('/.netlify/functions/get-user-data')
                    .then(res => res.json())
                    .then(data => setUser(data))
                    .catch(() => setUser({ credits: 0, tier: 'guest' }));
            }, []);

            const handleExit = () => {
                window.location.href = 'index.html';
            };

            return (
                <window.NeonStormGame 
                    user={user} 
                    onExit={handleExit} 
                />
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('neon-storm-root'));
        root.render(<App />);
    </script>
</body>
</html>